2007-04-07 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* misc_track.c: when adding a duplicate keep the original
          filename information if it's still valid.

	* file_itunesdb.c: removed rating and playcount completely
          from extended info hash routines. Added local_itdb_id and
          local_track_dbid.

	* src/display_itdb.c
	  src/display_itdb.h
	  src/file_itunesdb.c
	  src/main.c
	  src/misc_track.c
	  src/misc_track.h: introduced and maintain a filename hash
	  for each repository. Will be used to cross-reference between
	  repositories for playcounts and on-the-fly conversion.

	* gtkpod.glade
	  src/clientserver.c
	  src/display_itdb.c
	  src/display_itdb.h
	  src/file.c
	  src/file_itunesdb.c
	  src/misc_playlist.c
	  src/misc_track.c
	  src/prefs.c
	  src/prefs_window.c
	  src/sha1.c: finished renaming of wrong md5 references to sha1.

2007-04-02 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* scripts/sync-evolution: make syncing of contacts containing
          pictures possible. Thanks to Lars Friedrichs.

2007-03-29 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/display_playlist.c (pm_drag_data_received): bugfix:
          allow to drop contents of one playlist into another playlist
          even if playlist view is "sorted". (Sorting currently
          disabled anyway)

	* src/display_playlist.c: small rework in preparation of
          future changes. New support functions
          pm_get_position_for_itdb(), pm_get_position_for_playlist(),
          pm_get_iter_for_itdb(), pm_get_iter_for_playlist() replace
          some of in-function code. pm_name_changed() changed to
          pm_itdb_name_changed().

	* src/file_itunesdb.c
	  src/display_itdb.c: use of new support functions above
	  instead of dedicated code.

2007-03-28 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file.c
	  src/file_itunesdb.c
	  src/misc_track.c: When podcasts were first introduced,
	  iTunes did not add podcasts to the master playlist and only
	  showed them in the Podcast playlist. This has changed in the
	  meanwhile and Podcasts also appear in the master playlist
	  (i.e. when browsing through the music files on an
	  iPod). This patch make gtkpod behave the same. Old iTunesDBs
	  with podcasts not listed in the MPL are automagically updated.

2007-03-26 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* misc.c: corrected copyright to show 2002-2007.

	* context_menus.c: Implemented Andrzej Palejko's patch to
          allow copying of tracks and playlists from within the
          context menu without using DND.

2007-03-25 P.G. Richardson <phantom_sf at users.sourceforge.net>

	* details.c: removal of coverart_set_images from
	  details_button_apply_clicked()

  	* display_coverart.c: set prefs key in coverart_init_display()
	  when coverart display is displayed

	* display_playlists.c: added coverart_set_images to
	  pm_add_track, pm_remove_track, pm_track_changed.
	  retained coverart_set_images call in pn_selection_changed_cb
	  as this displays the coverart when a playlist is selected

	* display_sorttabs.c: coverart_set_images retained in
	  st_sort() as a reiniting of the coverart is never fired
	  during an alphabetize operation

	* fileselection.c: calls to coverart_set_images removed as
          this is taken care of by pm_add_track() in
          display_playlists.c

	* delete_track_ok.c: call to coverart_set_images retained as
          although pm_remove_track correctly calls this function, it
          is too early in the delete process and the deleted track is
          still displayed

	* prefs.h: addition of KEY_DISPLAY_COVERART key for use by
          display_playlists functions

2007-03-25 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* gtkpod.glade: added hbox into which the sorttab/tracklist
          view is placed (for futures to come).

2007-03-19 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* display.c (display_create): removed reference to stop_button

	* src/display.c
	  src/display.h
	  src/display_private.h
	  src/display_sorttabs.c:
	  sorted out remaining assertions produced after last night's
	  changes. Made st_page_selected() and st_create_notebook()
	  static.

2007-03-18 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* gtkpod.glade
	  src/display.c
	  src/display.h
	  src/display_playlists.c
	  src/display_private.h
	  src/display_sorttabs.c
	  src/display_tracks.c
	  src/misc.c
	  src/misc.h
	  src/misc_track.c
	  src/prefs.c
	  src/prefs_window.c: Clicking on an item with the right mouse
	  button will select and open the context menu, which is the
	  intended behavior. As a consequence, the interface will
	  remain blocked while the selection is being updated and
	  displayed.

2007-03-17 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* po/de.po: update supplied by Kai-Ove Pietsch.

2007-03-11 Todd Zullinger <tmzullinger at users.sourceforge.net>

	* src/prefs_window.c: hide Last.FM tab when not built with
	  curl libs

2007-02-27 P.G. Richardson <phantom_sf at users.sourceforge.net>

	* display_coverart.c: Changed coverart_set_images to internally
	  get the playlist and checks whether the playlist is null
	  or not. Thus, all calls to coverart_set_images require
	  no checking of parameters beforehand.
					
	* details.c,
	  display_playlists.c
	  file_itunesdb.c
	  fileselection.c
	  misc_confirm.c: functions updated to call modified version
	  of coverart_set_images. data_changed function no longer
	  calls coverart_set_images since this is used in too many
	  other places where setting coverart is unnecessary and error
	  prone.

2007-02-26 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/display_spl.c: Smart playlists now support the following
	  new fields: album artist, tv show, last skipped, season
	  number, skipcount and video kind.

	* configure.in: require libgpod >= 0.4.3

2007-02-22 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file_export.c (export_trackglist_when_necessary):
          cosmetic change (!a || !b) -> !(a && b)

	* src/misc_track.c (add_tracks_to_playlist): bugfix: dragging
          tracks between iPods did not work if no local path was
          available.

	* gtkpod.glade: left-justify "Album Art" in cover display.

	* src/prefs_window.c
	  src/prefs.c: removed references to "display_artcovers".

	* src/displac.c
	  src/display_coverart.c: remember if coverart was last shown
	  or hidden.

2007-02-23 P.G. Richardson <phantom_sf at users.sourceforge.net>

	* display_coverart.c
		- Avoided null pointer exceptions by testing cdwidget
		  first in coverart_block_change()
		- Ensured the pande0 button release event only
		  initiaties if a width change has truly occurred
		  ie. gtk_paned_get_position() != WIDTH

	* display_playlists.c
		- Blocked other coverart related changes while a
		  pm_playlist_change_cb is being enacted.
		- Blocking is lifted prior to the call to
	          coverart_set_images
		- pm_playlist_change_cb() will occur on deletion of a
	          playlist. In this case the deleted playlist
		  will be nullified. In this case, clear any coverart
		  images rather than setting them (none to set)

	* file_itunesdb.c
		- data_changed function called whenever track details
		  are changed. Added a resettting of the coverart to
		  this function so all tracks in coverart display are
		  synced with database data

2007-02-22 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* main.c, display_coverart.c: fixed possible access to
          uninitialized pointer

	* confirmation.c (cleanup): don't access free'd pointer.

2007-02-22 P.G. Richardson <phantom_sf at users.sourceforge.net>

	* display_coverart.c 
	  - Added "Album Art" title label to display_coverart pane
	  - Changed set_display_dimensions to make WIDTH=HEIGHT giving
	    aspect ratio default of 1 rather than 1.2
	  - Added patch to dispay_coverart.c to correctly cleanup
	    pixbuf memory leakag. (All credit for this to Christophe
	    (teuf at gnome.org))

2007-02-20 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* Modified Files:
	  .cvsignore TODOandBUGS.txt configure.in gtkpod.glade 
	  src/Makefile.am src/display.c src/display.h 
	  src/display_playlists.c src/display_private.h 
	  src/display_sorttabs.c src/display_tracks.c 
	  src/fileselection.c src/main.c src/misc_confirm.c src/prefs.c 
	  src/prefs_window.c 
        * Added Files:
	  pixmaps/cdshine.png pixmaps/default-cover.png 
	  src/display_coverart.c src/display_coverart.h

	  Merged P.G. Richardson's album display branch back to the
	  main trunk. Thanks for your work!

2007-02-19 Jorg Schuler <jcsjcs at users.sourceforge.net>

	 * src/display.c
	   src/display_playlists.c
	   src/display_private.h: renamed pm_add_all_playlists() to
	   pm_add_all_itdbs().

2007-02-18 Jorg Schuler <jcsjcs at users.sourceforge.net>

	 * po/es.po: updated -- thanks to Alex Lamas.

	 * gtkpod.glade: Renamed "Synchronize Playlist" to
           "Synchronize Playlist with Dir(s)".

	 * README: updated section "Synchronize with Directories"

2007-02-11 Jorg Schuler <jcsjcs at users.sourceforge.net>

	 * README: fixed some typos -- thanks to Daniele Forsi.

2007-02-10 Jorg Schuler <jcsjcs at users.sourceforge.net>

	 * sync-evocalendar.sh
	   sync-kaddressbook.sh
	   sync-korganizer.sh
	   sync-notes.sh
	   sync-tomboy.sh
	   sync-webcalendar.sh: corrected syntax description from
	   "-e=none" to "-e none".

	 * src/file_export.c (export_playlist_file_write): simplified
           prefs_get_*_value() to prefs_get_*()

	 * file.h (FileSource): changed order to reflect the order of
           options in the Export Playlist file requester
           dialog. Thanks to Todd.

	 * README: updated instructions on how to restore one's iPod
           after file system errors or similar devastating events.

2007-02-09 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/display_tracks.c (tm_search_equal_func,
          tm_set_search_column): make tv-show, -episode and -network
          searchable.

2007-02-07 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file_itunesdb.c: changed message string (thanks to
          Daniele Forsi)

2007-02-06 Jorg Schuler <jcsjcs at users.sourceforge.net>

        * scripts/convert-flac2m4a.sh
          scripts/convert-flac2mp3.sh
          scripts/convert-m4a2mp3.sh
          scripts/convert-mp32m4a.sh
          scripts/convert-ogg2m4a.sh
          scripts/convert-ogg2mp3.sh
          scripts/convert-wav2m4a.sh
          scripts/convert-wav2mp3.sh: fixed some bugs in
          conversion scripts (Mario Rossi).

        * src/file_itunesdb.c
          src/prefs.c: remember dialog size and "display details"
          state, display warning when transferring track that cannot
          be played by the iPod (Mario Rossi).

2007-02-05 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/details.c
	  gtkpod.glade: small fixes for "Edit Details Window" by Mario Rossi.

        * gtkpod.glade
          scripts/convert-flac2m4a.sh
          scripts/convert-flac2mp3.sh
          scripts/convert-ogg2m4a.sh
          scripts/convert-ogg2mp3.sh
          scripts/Makefile.am
          src/display_itdb.h
          src/file.h
          src/file_convert.c
          src/file_convert.h
          src/file_itunesdb.c
          src/prefs_window.c
	  src/prefs.c: display of conversion progress and improved
          conversion scripts (receive meta tags by command line
          arguments). Thanks to Simon Naunton!

          scripts/convert-m4a2mp3.sh
          scripts/convert-mp32m4a.sh
          scripts/convert-wav2m4a.sh
          scripts/convert-wav2mp3.sh: new scripts for mp3, m4a and wav
          conversion.


2007-02-04 Jorg Schuler <jcsjcs at users.sourceforge.net>

        * gtkpod.glade
          src/display.h
          src/display_tracks.c
          src/misc_conversion.c
          src/misc_track.c: Patch by Mario Rossi to allow editing of
          TV show metadata and media type. Big thanks!

	* configure.in: require libgpod >= 0.4.2

	* scripts/Makefile.am: added convert-og2m4a.sh to script list.

	* scripts/sync-webcalendar.sh: applied patch from Giray Devlet
          for support of differently named calendars.

2007-01-24 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* scripts/convert-flac2mp3.sh: fixed typo (thanks to Peter Edwards)

	* scripts/convert-ogg2mp3.sh: applied Peter Edwards' patch

	* scripts/convert-ogg2m4a.sh: new script courtesy of Peter Edwards

2007-01-18 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* scripts/convert-flac2mp3.sh
	  scripts/convert-ogg2mp3.sh: some minor fixes pointed out by
	  Peter Edwards. Thanks!

	* scripts/convert-flac2m4a.sh: thanks to Peter Edwards.

	* src/display_itdb.h
	  src/file.c
	  src/file.h
	  src/file_convert.c
	  src/file_convert.h
	  src/file_itunesdb.c
	  src/flacfile.c
	  src/oggfile.c: changes in conversion engine. Whether
	  conversion is necessary will be determined at the time of
	  copying, not at the time of adding to ensure that drag and
	  drops from the Local repository work as expected.

	* src/clientserver.c
	  src/date_parser.l
	  src/date_parser2.l
	  src/display_sorttabs.c
	  src/file_itunesdb.c
	  src/misc_confirm.c
	  src/tools.c: corrected typo (occured -> occurred)

2007-01-16 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* scripts/convert-flac2mp3.sh
	  scripts/convert-ogg2mp3.sh
	  src/file_convert.[ch]
	  src/flacfile.[ch]
	  src/oggfile.[ch]: new files for patch mentioned below

	  configure.in
	  gtkpod.glade
	  scripts/Makefile.am
	  src/Makefile.am
	  src/display_itdb.h
	  src/display_tracks.c
	  src/file.c
	  src/file.h
	  src/file_itunesdb.c
	  src/misc.c
	  src/misc.h
	  src/misc_conversion.c
	  src/misc_track.c
	  src/prefs.c
	  src/prefs_window.c
	  src/repository.c
	  src/syncdir.c
	  src/tools.c: combined patch by Marc d[r]eadlock and Simon
	  Naunton for on-the fly conversion of FLAC and OGG files
	  during export to the iPod, plus some patches thrown in by
	  myself. Thanks for the contribution!

	* src/charset.c: Default Japanese auto-conversion to UTF8
          instead of EUC-JP. Thanks to Jun Kobayashi

	* src/display_sorttabs.c (on_st_switch_page): avoid CRITICAL
          warning when the "Special" filter tab was selected. Thanks
          to Audrius Meskauskas for pointing this out.

	* src/file.c: when looking for thumbnail files, also look for
          uppercase filename extensions, like .JPG -- not only for
          .jpg.

	* gtkpod.glade
	  src/details.c
	  src/display.h
	  src/display_itdb.c
	  src/file.c
	  src/misc.c
	  src/misc.h
	  src/misc_conversion.c
	  src/misc_track.c: Mario Rossi's patch to display and select
	  TV-related data fields and the media type of a given track.

2007-01-15 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* po/ja.po: updated Japanese catalog -- thanks to Kentaro Fukuchi

2007-01-14 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* po/de.po: update by Kai-Ove -- thanks!

	* po/he.po: update by Assaf Gillat -- thanks!

2007-01-08 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* po/it.po: fuzzy'ed out translation with incorrect format
          string.

	* po/ja.po: fuzzy'ed out translation with two plural forms
          (Japanese only supports one plural form) until a solution is
          found.

	* po/fr.po: updated French catalog (thanks to Eric Lassauge)

	* po/POTFILES.in: added support.c

2007-01-07 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* INSTALL: corrected PKG_CONFIG_PATH

2006-11-28 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* configure.in:
	  INSTALL: require gtk >= 2.6.0

2006-11-26 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/display_playlists.c: display duplicates when adding
          tracks through DND.

	* src/display_playlists.c: avoid crash when clicking on the
          'Eject/Load iPod' icons too quickly.

	* src/details.c: indicate corrupted artwork data.

2006-11-24 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/prefs.c
	  src/clientserver.[ch]: Add command line argument to print
	  out the gtkpod sha1 hash of a file ("--hash"). Thanks to
	  Todd Zullinger.

	* src/context_menus.c: Make context menu more consistent
          ('Edit Playlist Properties', 'Edit iPod Properties' and
          'Edit Repository Properties').

	* src/ipod_init.c: gp_ipod_init() would 'forget' what model
          the user selected earlier when setting up the iPod repository.

2006-11-22 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/: renamed
	  - display_songs.c to display_tracks.c
	  - md5.c to sha1.c
	  - md5.h to sha1.h

	* subsequent changes to Makefile.am and some #includes.

	* src/md5.[ch], src/lastfm.[ch]: lastfm support by Anant
          Narayanan.

2006-11-17 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/*.[ch]: realized that we are using sha1 hash and not md5
          hash, therefore renamed all relevant occurences of md5
          (function names only so far).

2006-11-08 James Liggett <freethinkerjim at users.sourceforge.net>
	
	* src/file.c
	  src/file_itunesdb.c: Patch from Rommel G. Custodio
	  <sessyargc  at yahoo.com> that allows current CVS gtkpod to compile 
	  with current CVS libgpod.  

2006-10-22 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* scripts/sync-evocalendar.sh: new option for adding a filter
          script. Thanks to Clarke Brunsdon for the patch.

2006-10-21 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/mp4file.c: fix compilation error when compiling with
          libmp4v2 package from http://www.debian-multimedia.org/

	* src/display_songs.c (tm_get_nr_of_tracks): speed up counting
          of displayed tracks by using
          gtk_tree_model_iter_n_children() instead of actually
          counting. Thanks to Clarke Brunsdon for the patch.

2006-10-14 Jorg Schuler <jcsjcs at users.sourceforge.net>

        * src/prefs.c: fix compiler warning on 64bit systems (%llu)

	* src/mp4file.c: don't assume that the audio track is track
          0. Instead cycle through all tracks until an audio or video
	  track is found.

2006-10-02 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file_export.c: only write error messages for track for
          which export failed and not all subsequent tracks as
          well. Thanks to Joachim Tesch for the patch.

2006-09-27 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/mp3file.c: Todd Zullinger caught the break statement at
          the wrong place.

2006-09-26 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* po/sv.po: updated version by Stefan Asserhall

	* src/mp3file.c: when adding artwork make sure the correct
          type is used (preferably type 3 (cover) or type 0 (used by
          iTunes)). Thanks to Todd Zullinger for the patch.

2006-09-24 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/mp3file.c (mp3_write_file_info): YEAR tag was not
          written to file. Thanks to t0C for the patch.

	* src/syncdir.c (sync_playlist): clean up
	  'updated/non-updated/duplicate' lists so they don't pop up
  	  unexpectedly at a later time.

	* po/es.po: updated version by Alejandro Lamas Davi√±a

	* README
	  src/main.c
	  src/misc_confirm.c
	  src/prefs.c
	  src/prefs_window.c: removed references to "automount".

	* configure.in: bumped to V0.99.8 for release

	* configure.in: bumped to V0.99.9CVS for new CVS version

2006-09-21 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file.c: (update_track_from_file): forgot to flag track
          for re-transfer when hash value had changed (thanks to Todd
          Zullinger).

	* src/file.c (add_coverart): handle templates better (no
	  "safety" substitutions of characters). Thanks to Flavio
	  Stanchino.

	* gtkpod.glade
	  src/details.c
	  src/display.h
	  src/display_itdb.c
	  src/display_songs.c
	  src/file.c
	  src/misc_conversion.c
	  src/misc_track.c: Display artwork path (thanks to Flavio
	  Stanchino for most of the patch).

2006-09-18 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* mp3file.c: support reading of coverart from APIC
          tag. Work around non-conformant tags written by iTunes.

	* mp4file.c: update instructions at the beginnging of the
          file, read soundcheck values irrespective of "readtags"
          setting.

	* gtkpod.glade
	  src/prefs.c
	  src/prefs_windows.c
	  src/mp3file.c
	  src/file.c: implement "coverart_apic" prefs key allowing to
	  select whether coverart stored in tags should be used or not.

	* src/display_itdb.c
	  src/display_itdb.h: new: gp_track_set_thumbnails_from_data()

2006-09-17 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* misc_conversion.c: Typo: "Suffling" -> "Shuffling". Thanks
          to Todd for pointing this out.

	* ipod_init.c (set_cell): display iPod sizes smaller 1 GB in
          MB, instead of displaying "0 GB".

	* INSTALL: update with list of dependencies (thanks to Todd)

2006-09-14 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* display_spl.c (spl_check_number_of_rules): simplify
          activation/deactivation of button to remove rules.

2006-09-11 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* display_spl.c (spl_update_rule): don't reactivate the '-'
          button when changing the rule.

2006-09-11 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* file.c (add_artwork): fix problem when artwork template
          expands into something containing a '.'. Thanks to Thorsten.

2006-09-01 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* gtkpod.glade
	  src/file.c
	  src/prefs_window.c: file exclusion mask when adding tracks
	  -- thanks to Richard Hyde for the patch. Will have to add
	  exclude-support for syncing and updating.

	* src/syncdir.c: fix problem when directory to sync ends with '/'.

2006-08-31 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* syncdir.c (sync_playlist): fix segfault when removing track
          from iPod.

2006-08-30 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* file.c (get_track_info_from_file): don't reset time_added
          when updating files.

2006-08-21 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* TROUBLESHOOTING: added hint for ubuntu users. Thanks to
          Marcelo Varanda.

2006-08-18 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/file.c (get_track_info_from_file): set time_modified to
          modification date of file instead of current time. Thanks to
          Richard Hyde.

2006-07-04 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/misc_track (track_scan_length): work around problem in
          conversion from gdouble to gint32 which caused playlength
          be set incorrectly (most notable in write-through mode in
          the edit details window).

2006-07-02 Jorg Schuler <jcsjcs at users.sourceforge.net>

	* src/misc_confirm.c (delete_playlist_head): fixed stupid
          compile error.

2006-06-29 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/confirmation.c: Add safety to "remove all tracks"
          context menu.


2006-06-27 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display_playlist (pm_remove_playlist): if entire itdb is
          removed, clear display (filter tabs, playlist view) first to
          avoid segfaults when non-existent tracks are accessed for
          display updates.

2006-06-26 James Liggett <freethinkerjim@users.sourceforge.net>
	
	* src/misc.c
	  src/prefs.h: Fixed a translation problem, 
	  updated copyright. 

	* src/misc.c
	  src/prefs.c: Updated copyright info, prefs howto,
	  and about box. 
	
	* src/prefs_window.c: Fixed sort ignore list bug.

	* src/main.c
	  src/misc_confirm.c
	  src/prefs.c
	  src/prefs.h
	  src/prefs_window.c: Got rid of old prefs infrastructure :)
	  Also added prefs functions for handling double/float keys.
	 	

2006-06-25 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/md5.c
	  src/md5.h
	  src/prefs.c
	  src/prefs.h
	  src/prefs_window.c: Fixed the fallout from the charset fiasco:
			      	- MD5 checksums work again
				- Reapplied other patches trashed by the reversal
				- Old prefs is now just a stub (will be removed shortly)

2006-06-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/repository.c
	  src/prefs.c
	  src/prefs.h: added temp_prefs_remove_key()

	  src/repository.c: use temp_prefs_remove_key() to remove keys.

	  src/file_itunesdb.c: fix assertions related to get_offline()
	  introduced yesterday.

	* src/repository.c: only print debug messages about keys
          added/removed if LOCAL_DEBUG is defined

2006-06-24 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/charset.c
	  src/prefs.c
	  src/prefs.h: Redid charset patch.

	* src/charset.c
	  src/file.c
	  src/prefs.c
	  src/prefs_window.c: Finish up charset fixes.

	* src/charset.c: Fixed a possible crash (spotted by 
	  Jorg) Also got rid of some unneeded casts.

2006-06-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.[ch]: removed unused prefs_print() declaration,
          moved discard_prefs() declaration to prefs.c

	* gtkpod.glade
	  src/display.c
	  src/display.h
	  src/display_itdb.h
	  src/display_playlists.c
	  src/file.c
	  src/file_export.c
	  src/file_itunesdb.c
	  src/info.c
	  src/misc.c
	  src/misc.h
	  src/prefs.c
	  src/prefs.h: removed global offline prefs key and moved it
	  to the individual itdbs (ExtraiTunesDBData). The offline
	  code is still available, but currently not used (no
	  possibility to toggle offline mode from the GUI).

	* src/display.c (on_check_ipod_files_activate): require that
          the iPod is loaded before checking files.

	* src/display.c (on_ipod_directories_new): use new
	  gp_ipod_init() function to create directories.

	  src/file_itunesdb.c (gp_write_itdb): use new gp_ipod_init()
	  function to create directories.

	  src/misc.h
	  src/misc_confirm.c: Removed old ipod_directories... code.
	  code.

2006-06-23 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display.c
	  src/misc_confirm.c
	  src/misc_playlist.c
	  src/misc_track.c: use message_sb_...() instead of indivudual strings.

	* src/file_export.c
	  src/file_itunesdb.c
	  src/info.c
	  src/info.h
	  src/misc_playlist.c
	  src/prefs.c
	  src/prefs.h
	  src/tools.c: removed 'statusbar_timeout' prefs key and
	  introduced 'gtkpod_statusbar_timeout()' call
	  instead (the value doesn't have to be saved). Statusbar
	  messages are now displayed again.

	* src/display.c
	  src/display_itdb.c (gp_get_ipod_itdb): changed default
          behavior in case more than one iPod itdb is present.

	* src/context_menus.c
	  src/display.c
	  src/display_itdb.c
	  src/display_itdb.h
	  src/display_playlists.c
	  src/display_songs.c
	  src/fileselection.c
	  src/misc_playlist.c
	  src/prefs_window.c: changed default behavior of
	  gp_get_active_itdb() to return NULL when no itdb is
	  selected and renamed to gp_get_selected_itdb(). Print message
	  when no itdb is selected when one is needed.

	* src/info.c
	  src/info.h: added standard error messages, used in the conversion above.
	      void message_sb_no_itdb_selected (void);
	      void message_sb_no_tracks_selected (void);
	      void message_sb_no_playlist_selected (void);
	      void message_sb_no_ipod_itdb_selected (void);

	* src/display.c (display_adjust_menus): don't completely
          disable edit menu when no itdb is present.

2006-06-22 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/context_menus.c: moved context menus over to new
          system. 

	* src/charset.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Reversed patch from 6/20 -- will be redone.

2006-06-20 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/charset.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved charset to new prefs.

	* src/display_songs.c
	  src/display_sorttabs.c
	  src/misc.h
	  src/misc.c: Renamed disable_sorting to sorting_disabled
	  to avoid confusion. 

2006-06-19 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/display_playlists.c
	  src/display_sorttabs.c
	  src/misc.c
	  src/misc_track.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved block_display to new prefs.
	
	* src/display.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved display_toolbar and 
	  toolbar_style to new prefs.

	* src/misc.h
	  src/misc.c
	  src/prefs.h
	  src/prefs.c: Renamed prefs_get_disable_sorting to 
	  disable_sorting and moved to misc.c/h. 

	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved display_tooltips_prefs to new prefs.

	* src/display.c
	  src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved display_tooltips_main to new prefs.

	* src/display_sorttabs.c:
	  src/prefs.c
	  src/prefs.h
	  src/prefs_window.c: Moved group compilations to new prefs.

2006-06-16 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/context_menus.c: started rewrite of context menu
	  setup. Cleaned up the playlist context menu.

2006-06-15 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/prefs_window.c: Fixed some sorting window bugs:
			      	- Pressing cancel shouldn't commit changes
				- Sorting now works again. 

2006-06-15 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.c
	  src/prefs.h:
	  src/misc.h: moved LIST_END_MARKER to prefs.c (private),
	  moved SORT_... enum to display.h

2006-06-14 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/misc.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: sort_ign_string_ list now fully uses new
	  prefs interfaces

	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved sort_ign_fields_ to new prefs. 
	  Also got rid of sortcfg.

2006-06-14 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/mp4file.c: mp4_read_soundcheck not defined when mp4v2
          library was not present.

	* Changelog_detailled: formatting (9 space -> 8 spaces)

	* src/prefs.h
	  src/syncdir.h
	  src/syndir.c
	  src/repositories.c: moved PLAYLIST_AUTOSYNC enum to
	  syncdir.h and renamed.

	* src/context_menu.c: very first phase of rearrangement.

2006-06-13 James Liggett <freethinkerjimWusers.sourceforge.net>
	
	* src/display_songs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved tm_sortcol and tm_sort to 
	  new prefs.

2006-06-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs_window.c (on_path_button_pressed): corrected
          error when "Browse" button was pressed (current path
          sometimes was not passed to fileselector)

	* src/fileselection.c: avoid run-time warning.

	* src/prefs.h
	  src/prefs.c
	  src/prefs_windows: Made PathType enum redundant outside
	  prefs.c (needed only for key conversion).

2006-06-12 James Liggett <freethinkerjim@users.sourceforge.net>
	
	* src/display_playlists.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved pm_sort to new prefs.
	
	* src/context_menus.c
	  src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved st_sort to new prefs.
	
	* src/display_songs.c
	  src/misc_playlist.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved tm_autostore to new prefs.
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved write_charset to new prefs.

	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved update_charset to new prefs.

	* src/misc.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved case_sensitive to new prefs.

	* src/misc_playlist.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved misc_track_nr to new prefs.
	
	* src/misc_playlist.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved not_played_track to new prefs.

2006-06-11 James Liggett <freethinkerjim@users.sourceforge.net>
	
	* src/prefs.h
	  src/prefs_window.c: Fixed paths not showing up/being set
	  in prefs window.	

	* src/display_songs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved multi_edit to new prefs.

	* src/display_songs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved multi_edit_title to new prefs.

	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved tmp_disable_sort to new prefs.

	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved last_prefs_page to new prefs.

	* src/display.c
	  src/info.c
	  src/prefs.h
	  src/prefs.c: Moved info_window to new prefs.

	* src/fileselection.c
	  src/misc_track.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved add_recursively to new prefs.
	
	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved startup_messages to new prefs.	

	* src/main.c
	  src/misc_confirm.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved automount to new prefs.
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved mserv_use and 
	  mserv_username to new prefs. 
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved coverart and 
	  coverart_template to new prefs.

2006-06-11 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.h: removed unused declarations.

	* src/file.c: fixed two memory leaks.

	* src/misc_playlist.c: fixed memory leak.

	* src/file.c:
	  Got rid of get_file_name_verified(),
	  get_file_name_on_ipod)( as they can be emulated by
	  get_file_name_from_source().

	  Got rid of get_file_name() and get_file_name_on_harddisk
	  (substituted where used) used).

	* src/mp3file.c: removed mp3gain code

	* src/tools.c: added mp3gain and aacgain code.

	* src/prefs_windows.c: added aacgain path in the Tools
          section, improved layout.

2006-06-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/mp4file.c: read aacgain if present.

	* src/display_itdb.h
	  src/file.c
	  src/file_itunesdb.c
	  src/mp3file.c
	  src/mp4file.c
	  src/tools.c
	  Got rid of radio_gain, audiophile_gain, peak_signal_set,
	  radio_gain_set, audiophile_gain_set.

	  TODO: rework normalisation process -- probably do not
	  support mp3gain any more. "Normalize" would then just
	  re-read the gain tags.

	* src/mp3file.c: renamed GainData *etr; to GainData *gd; to
          avoid confusion (63 occurences)

	* src/ipod_init.[ch]...: renamed init_model_number_combo()
          and init_ipod() to gp_...()

	* src/file_itunesdb (gp_load_ipod): ask for model number of
	  the iPod if none is available. If one is available from
	  SysInfo file, store that information in the prefs system.

	* src/ipod_init.[ch]: new: gp_ipod_init_set_model() asking
          for a model number string and storing it.

	* src/ipod_init.c (gp_ipod_init_set_model): mention
          mountpoint when asking for the model.

	* src/prefs.[ch]
	  src/prefs_window.c
	  src/display.[ch]
	  src/display_playlists.c
	  Did away with pm_autostore.

2006-06-10 James Liggett <freethinkerjim@users.sourceforge.net>
	
	* src/prefs.h
	  src/prefs.c: Got rid of prefs_validate path.
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved parsetags_template to 
	  new prefs.	

	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved parsetags_overwrite to 
	  new prefs
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved parsetags to new prefs.
	
	* src/file_itunesdb.c
	  src/misc.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved write_extended_info to new prefs.
	
	* src/main.c
	  src/prefs.h
	  src/prefs.c: Moved autoimport_commandline to new prefs.	 

	* src/mp3file.c
	  src/mp4file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved readtags to new prefs.

	* src/main.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Moved autoimport to new prefs.
	
	* src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Got rid of unused_gboolean3.

	* src/prefs.c: Miscellaneous formatting fixes. I've now
	  switched to using emacs, so I hope this won't be a problem
	  anymore :)

2006-06-09 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display_sorttabs.c
	  (sp_update_date_interval_from_string): fix compilation
	  warning and possible segfault.

2006-06-09 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* README: some hints from a recent gtkpod-questions thread.

2006-06-08 James Liggett <freethinkerjim@users.sourceforge.net>

        * src/info.c
          src/prefs.h
          src/prefs.c: Move size_info to new prefs. Also did some
	  minor cleanup

        * src/prefs.h
          src/prefs.c
          src/prefs_window.c: Move size_prefs to new prefs	 

        * src/fileselection.c
          src/prefs.h
          src/prefs.c: Move size_dirbr to new prefs

        * src/confirmation.c
	  src/prefs.h
	  src/prefs.c: Move size_conf to new prefs
	
	* src/confirmation.c
	  src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c: Move size_cal and size_conf_sw to new prefs
	
	* src/display.c
	  src/prefs.h
	  src/prefs.c: Move size_gtkpod to new prefs

2006-06-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/repository.c: set_entry() -> set_entry_index() to
	  simplify code.

	  Display iPod model number and allow editing.

	  TODO: 
	  - reset model number if iPod with different number is loaded
	  - write model number to iPod if iPod without model number
	    is loaded.

	* src/repository.c: use GtkComboEntry to select iPod model
	  just like in ipod_init.c
			 
2006-06-07 James Liggett <freethinkerjim@users.sourceforge.net>
	
	* src/display_playlists.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Move mpl_autoselect to new prefs
	
	* src/file.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Move tag_autoset to new prefs.
	
	* src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c: Move paned_pos_ keys to new prefs
		 
2006-06-06 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/repository.c: use ComboBoxEntry to allow the selection
          of the iPod model in the same way as in the ipod_init
          dialog.

	* src/display.c
	  src/display_songs.c
	  src/display_sorttabs.c
	  src/info.c
	  src/misc_confirm.c
	  src/misc_input.c
	  src/prefs.h
	  src/prefs.c
	  prefs_window.c: Move sort_tab_num to new prefs.

	* src/display_songs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Move tm_col_order to new prefs. Also
	  added a finalize_prefs function to allow prefs to do things
	  before the file gets saved.

	* src/prefs_window.c: Fix columns not appearing after being
     	  set in prefs dialog

	* src/display_songs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Move tm_col_visible to new prefs.

2006-06-05 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/file.c: fixed double g_free() (thanks to Florent
	  Bouchez).

	* src/ipod_init.c: pretty much finished ipod_init dialog.

2006-06-05 James Liggett <freethinkerjim@users.sourceforge.net>

        * src/display_songs.c
          src/prefs.h
          src/prefs.c: Move tm_col_width to new prefs.
   
        * src/display_sorttabs.c
          src/prefs.h
          src/prefs.c: Move sp_autodisplay to new prefs.
   
2006-06-04 James Liggett <freethinkerjim@users.sourceforge.net>
    
        * src/display_sorttabs.c
          src/prefs.h
          src/prefs.c: Move sp_playcount_low/high to new prefs.

        * src/display_sorttabs.c
          src/prefs.h
          src/prefs.c: Move sp_played_state, sp_modified_state, 
                       and sp_added_state to new prefs.

        * src/display_sorttabs.c
          src/prefs.h
          src/prefs.c: Move sp_rating_state to new prefs.

2006-06-03 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/details.c: removing of artwork did not really work.

	* src/file_itunesdb, src/ipod_init.[ch]: started dialog to
          create directories when not present on 'load'. Work in
          progress.

2006-06-02 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/display_sorttabs.c
	  src/prefs.h
          src/prefs.c: Move sp_*_cond to new prefs.

	* src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c: Move sp_or to new prefs.

2006-05-31 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/display_sorttabs.c
	  src/prefs.h
	  src/prefs.c
	  src/prefs_window.c: Move st_category to new prefs.

	* src/prefs.c: Add list end marker when setting
          variable-length list default entries.

	* src/prefs.c
	  src/prefs.h
	  src/prefs_window.c
	  src/display_sorttabs.c: Move sort tabs autoselect key to
	  new prefs

	* src/prefs.c: Clean up dead path keys in cleanup_keys

	* src/prefs.c: Delete a duplicate check for XMMS command. For
          some reason, this was in cleanup_keys twice.

2006-05-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.c (cleanup_keys): set "version" after cleanup is
          done.

	* src/prefs.c (save_prefs): write version string at the start
          of the file until the old prefs system is completely gone.

2006-05-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.c (clenaup_keys): added check for version
          dependent transition of 'path_play_now' key.

	* src/prefs.c (save_prefs): update version string before
          writing to file.

2006-05-29 James Liggett <freethinkerjim@users.sourceforge.net>

        * src/prefs.c: Clean up paths keys
          - Defaults for path_play_now, path_play_enqueue, and 
            path_mserv_trackinfo_root are set in set_default_prefrences
          - Key cleanup done in cleanup_keys 

2006-05-29 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/details, display.h, misc_conversion.c... 
	  Support for start time, stop time, skip when shuffling and
	  remember playback position.
	  
	  ******************************************************
	  Will require photosupport branch of libgpod to compile
	  ******************************************************

2006-05-28 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display_playlists.c (tree_view_get_cell_from_pos): take
          into account that bug in gtk_tree_view_get_cell_area() was
          fixed with GTK+2.8.18 (upon submitting bug report)

	* src/misc_track.c (gp_track_by_filename): fix segfault when
          adding tracks to iPod without iPod connected.

	* src/mp4file.c (mp4_get_file_info): read iTunNORM tag if
          present to set soundcheck (volumne normalisation)

2006-05-27 James Liggett <freethinkerjim@users.sourceforge.net>
   
	* src/prefs.c: Removed remove_key as it's not needed. 
   
	* src/prefs.c: Added new functions remove_key and
	  cleanup_keys to allow for deleting/renaming old or changed
	  keys
          
	* src/main.c
	  src/prefs.c: Disable prefs reading by new prefs system; let
          read_prefs_from_file_desc handle it until the transition is
          finished so we don't read prefs twice.

2006-05-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* po/sv.po: updated catalog from Stefan Asserhall

	* src/misc_track.c (track_copy_item): T_YEAR was not copied
          correctly.

2006-05-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.[ch]: new: temp_prefs_rename_subkey()

	* src/misc.[ch]: new: void set_itdb_index_prefs_string(),
          set_itdb_index_prefs_int()

	* src/repository.c: it's now possible to add new repositories
          (hardly tested)

	* gtkpod.glade

2006-05-23 Todd Zullinger <tmz@pobox.com>
   
        * src/prefs.c: Fix sort ignore list not working after prefs
          changes
          
2006-05-23 James Liggett <freethinkerjim@users.sourceforge.net>

	* src/prefs.c: Reverse previous patch as it breaks lists (argh!!)
   
        * src/prefs.c: Filter out deprecated/other prefs that the new
	  system doesn't manage, getting rid of the prefs duplication
	  problem and negating the need to filter out unneeded prefs
	  manually

2006-05-23 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/repository.c: continued 'Create Repository' dialog.

	* src/display_playlist.c
	  src/display.h: new functions pm_set_renderer_pix() and
	  pm_set_renderer_text() to be able to use the same style for
	  displayling playlist/repository names throughout gtkpod.

2006-05-22 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/fileselection.[ch]: replaced fileselection_get_dir()
          with fileselection_get_file_or_dir().

	* src/repository.c: started 'Create Repository' dialog.

2006-05-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/file.c (update_track_from_file): fixed possible segfault.

	* po/POTFILES.in: corrected file list.

	* src/display.c
	  src/display_itdb.c
	  src/display_playlists.c
	  src/display_songs.c
	  src/file.c
	  src/file_export.c
	  src/file_itunesdb.c
	  src/info.c
	  src/info.h
	  src/misc_confirm.c
	  src/misc_playlist.c
	  src/misc_track.c
	  src/tools.c: simplified code by having
	  gtkpod_statusbar_message() accept printf style arguments.

	* display_spl.c (spl_ok): mark data as changed.

	* context_menus.c: removed (volumne) 'Normalize'. Accessible
          via Tools-menu.

	* file_itunesdb.c (gp_write_itdb): statusbar message was
          incorrect (passed mpl instead of mpl->name to be printed).

	* removed remaining code for podcast download support

	* Menu entry to display repository/iPod options.

	* gtkpod.glade: Rearranged 'Edit' main menu

	* info.c: space update will use @itdb instead of 'mountpoint'
          to deisplay free space -> space_get_ipod_itdb(),
          gp_free_itdb().

2006-05-20 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* po/POTFILES.in: updated file list -> updated .po files.

	* src/misc.c: call_script now accepts an arbitary number of
	  command line arguments.

	* src/file.c (update_track_from_file): if no local filename
          is available, use the copy on the iPod to update.

	* src/display_songs.c (tm_cell_edited): when changing the
          track length also update starttime, stoptime and filesize
          (all needed to have the iPod play the hole file).

        * src/context_menus.c
          src/display.c
          src/display.h
          src/display_itdb.c
          src/display_itdb.h
          src/display_playlists.c
          src/display_songs.c
          src/file.h
          src/file_itunesdb.c
          src/main.c
          src/misc.h
          src/misc_confirm.c
          src/misc_input.c
          src/misc_track.c
	  gtkpod.glade: Introduction of load/eject ipod(s) and 'save
          changes'. ~/.gtkpod/gtkpod.load and ~/.gtkpod/gtkpod.eject
          are called before loading/after saving the iPod. Several
          iPods are supported.
           
2006-05-19 James Liggett <freethinkerjim@users.sourceforge.net>
   
	* src/prefs.c: Fix a build warning in convert_filename caused
          by my last patches...

	* src/prefs.c: Reversed part of previous patch on advice from
          Jorg
   
	* src/misc.c 
	  src/prefs.c: 
     
	* Clean up initial_mountpoint:
	  - Set default in set_default_prefrences rather than cfg_new
	  - Remove unneeded code in read_prefs_from_file_desc
	    (new prefs shouldn't use this/other deprecated prefs 
	    functions)
	  - Got rid of some superflous envionment reads 
	    (needs to only be done once in read_environment)
       
        * New prefs backend function read_environment is now enabled
          and used
       
        * Fixed convert_filename for use with read_envrionment
          - Added NULL string pointer check
   
        * src/prefs.c: Reversed part of previous patch on advice from
          Jorg

2006-05-18 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display_songs.c: simplified code for setup of columns.

	* src/display_playlists.c: connect/disconnect icon for iPods,
          identify if icon is clicked (printf a statement for the
          time being -- work in progress!)

2006-05-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* scripts/sync-tomboy.sh: recommitted

	* configure.in: gcc < 4.0 does not know -Wno-pointer-sign

	* src/md5.c: hash turned out different on little and big
	  endian machines

2006-05-16 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/repository.c: (sync_or_update_playlist): implemented
          update of smart playlist.

	* src/file_itunesdb.c
	  src/display_itdb.h: make sure, live playlists are updated
	  _after_ syncing of playlists has taken place.

2006-05-15 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/misc.[ch]: (get_playlist_prefs_int),
          get_playlist_prefs_string): new

	* src/display_itdb.c
	  src/file_itunesdb.c: automatically sync playlists on
	  startup (when loading database).

	* src/prefs_window.c: redefined the sync settings, set up
          easy-to extend handling for standard toggle checkboxes.

	* src/context_menu.c
	  src/display.c: moved 'Sync' over to new 'Sync Playlist'.

	* src/file.c: removed old sync-related code.

2006-05-14 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* move over gtkpod_confirmation() to using the new prefs
          system, along with a couple of keys (sync_remove,
          sync_remove_confirm, show_duplicates, show_sync_dirs,
          show_non_updated, show_updated, mserv_report_probs,
          delete_ipod, delete_file, delete_local_file,
          delete_database). Thanks to James Liggett!

	* src/file.c: copy_new_info() incorrectly handled pc_path and
          thumbnail_path, possibly leading to corruption of both when
          updating tracks.

	* src/repository.[ch]
	* src/syncdir.[ch]
	  It's now possible to sync directories from within the
	  repository option catalog. Next step: automatic sync at the
	  time of loading the database. Almost there!

2006-05-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/syncdir.c:
	* src/syncdir.h:
	* src/Makefile.am:
	  Added new source files for a complete rewrite of the
	  synchronization code.
	* file_itunesdb.c:
	* file.c:
	  added support for modification time of the song (needed for
	  fast syncing)

2006-05-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* moved path[i] and concal_autosync pref keys over to the
          new prefs system. Work in progress: currently the scripts
          for syncing cannot be set (this will be done from within
          the repository options).

2006-05-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* misc.[ch]: renamed get_itdb/playlist_key() to
          get_itdb/playlist_prefs_key()

	* misc.[ch]: new: get/set_itdb/playlist_prefs_string/int().

2006-05-07 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* preliminarily moved "mountpoint" to new prefs system.

2006-05-06 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.[ch]: new: temp_prefs_create_subset(),
          temp_prefs_flush(), prefs_flush_subkey(),
	  prefs_rename_subkey(), temp_prefs_subkey_exists()

	* src/display_itdb.[ch]: new: gp_itdb_remove(),
          gp_itdb_free().

	* src/repository.[ch]: new -- repository prefs. Work in
          progress, but you probably get the idea about what is to
          be.

	* src/display_playlists.c: streamlined slightly (only one
          column in model, so no reason to find out which), added
          indicator for changed repositories (italic), added
          indicator for local repositories (hard disk icon).

2006-05-05 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/*: moved 'prefs_get_last_dir_browse()' to new prefs
          system.

	* src/prefs.c: fixed bug introduced in temp_prefs_get_int().

	* src/fileselection.[ch]: new: fileselection_get_dir().

	* src/prefs.[ch]: new: temp_prefs_size().

2006-05-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs.[ch], src/prefswindow.c: renamed some temp_prefs
          and temp_list function names.

	* src/prefs.c: use strcmp() to compare keys for temp_prefs
          (otherwise keys cannot be retrieved safely because
          g_str_hash() is not unique.

	* src/prefs.[ch]: added temp_prefs_get... functions as well
          as reformatted some code a bit (way too much whitespace?!)

2006-05-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/md5.c (sha1_hash): corrected signedness warning.
	* src/charset.c (charset_check_k_code),
	  (charset_check_k_code_with_default): corrected signedness
	  warning. 
	* src/...: removed incomplete podcast code
	* gtkpod.glade: removed corresponding podcast references

2006-04-28 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/confirmation.c: pressing 'OK' several time would call
          the ok_handler several times, most likely resulting in a
          crash. Thanks to dforsi for pointing this out. Fixed by
          turning the dialog insensitive while before calling the
          handler.

	* src/misc.c (select_template): templates were compared
          case-sensitively, which could lead to non-exported files.

2006-04-27 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* scripts/sync-tomboy.sh: contributed by Tejas Dinkar

2006-04-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied James Liggett's preferences patches
          (id3-write-id3v24)

	* added scripts/sync-thunderbird-nano.sh (writes one file per
          address to work around a bug in old firmware versions, but
          may be useful for other users as well). Thanks to Paul
          Oremland

2006-04-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied James Liggett's preferences patches (id3-write,
          sort-prefs)

	* applied Peter Lieverdink' patch to allow import of h.264
          video via the mp4file.c interface.

	* mp3file.c (id3_set_string): fixed memory leak (thanks to
          Scott Guthridge)

2006-04-19 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied James Liggett's preferences patches.

2006-04-05 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied James Liggett's preferences patch (transition in
          progress).

	* details.c, file.c: copy 'has_artwork' flag when copying
          artwork info from one track to another.

2006-04-03 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c (gp_import_itdb): correct has_artwork flag
          (formerly flag1) for each track if unset or potentially set
          incorrectly.

	* bumped version to 0.99.6CVS

2006-03-31 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added hint about using iPod with Solaris/SPARC to
          TROUBLESHOOTING file. Thanks to Eric Enright.

	* added Spanish translation catalog es.po. Thanks to
          Alejandro Lamas.

2006-03-29 Jorg Schuler <jcsjcs@users.sourceforge.net>

        * info.c, misc_confirm.c: fixed typo: HAVE_statvfs ->
          HAVE_STATVFS

	* misc_confirm.c (delete_playlist_ok): use of playlist->name
          after removing the playlist could/should crash
          gtkpod. Fixed.

2006-03-18 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c (copy_new_info): copy artwork related -- should
          solve issue of updated artwork not displaying on iPod

2006-03-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Preliminary support for mobile phones supporting iTunes
          (requires the following directory structure to be present:
	  <mountpoint>/iTunes
	  <mountpoint>/iTunes/iTunes_Control
	  <mountpoint>/iTunes/iTunes_Control/iTunes
	  <mountpoint>/iTunes/iTunes_Control/Music
	  <mountpoint>/iTunes/iTunes_Control/Music/F00
	  <mountpoint>/iTunes/iTunes_Control/Music/F01
	  <mountpoint>/iTunes/iTunes_Control/Music/F02)

	* cosmetic changes to compile with the newest CVS version of
          libgpod.

	* use of itdb_get_..._dir() functions to get directory names
          on the iPod.

2006-03-12 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* md5.c (md5_hash_track): prefer filename on disk over
          filename on iPod -> changed files are copied to iPod when
          updating. This was an old bug.

	* file.c (copy_new_info), (get_track_info_from_file);
          mp3file.c: support new 'lyrics_flag' and 'movie_flag'.

	* configure.in: require libgpod 0.3.3 (CVS version)

	* po/ja.po: updated catalog (thanks to Kentaro Fukuchi)

2006-03-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* prefs.c (prefs_get_cfgdir): fix bug that crashes
          application when cfgdir cannot be created.

2006-03-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* scripts/sync-evocalendar.sh: handle multiple calendar and
          task files. Thanks to Michele C. Soccio

2006-03-06 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* bumped to V0.99.5CVS for further development

2006-03-05 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* bumped to V0.99.4 for release

	* fileselection.c: did not properly clean up after closing
          the dirbrowser window with the window-close button.

2006-03-04 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_export.c (export_playlist_file_init): missing
          initialization of fcd->win_xml made it impossible to change
          any options when exporting playlists.

2006-02-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c (write_extended_info): added ipod_path
          again (got lost somewhere along the way). Thanks to Todd.

	* file_itunesdb.c (gp_write_itdb): do not disable 'Import'
          button if iTunesDB was not written to the iPod
          successfully.

2006-02-19 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c (copy_new_info): forgot to copy
          thumb_path_utf8/locale resulting in segfaults.

	* mp3file.c. Set encoding before setting text fields. Thanks
          to 't0c' for the patch.

	* context_menus.c: context menu to remove playlists on the
          iPod were not displayed.

2006-02-14 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Allow to run autogen.sh if autoconf/automake/libtool
	* installations aren't necessarily installed as "automake",
	* "aclocal", etc. This is typically the case when several
	* different versions of the autotools are installed, with the
	* correct binary paths set in the respective environment
	* variables. (thanks to Mike Heffner)

2006-02-04 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/file_itunesdb.c: (gp_itdb_set_mountpoint): command line
          option '-m' to set the mountpoint did not work.

2006-02-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* scripts/mab2vcard: added support for mobile phone entries
          in thunderbird address books. Thanks to Sebastian Cruz.

	* TROUBLESHOOTING: added hint by Ingo Reimann

2006-01-07 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* INSTALL: hint about PKG_CONFIG_PATH and LD_LIBRARY_PATH.

2006-01-02 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/prefs_windows.c: browse button for "Sync Notes Script"
          opened a dirbrowser instead of a file browser.

	* scripts/sync-knotes.sh: changed awk option
          "--field-separator" to "-F" for better partability. Thanks
          to cacedo.

2005-12-14 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* sync-thunderbird.sh: Ben Ford's patch to allow export of
          several address books (by specifying the output filename)

	* remove all podcast code and libcurl dependency (#if 0...)

	* sv.po: updated catalog by Stefan Asserh√§ll

	* bumped to 0.99.2 for release

	* bumped to 0.99.3 for CVS version

	* TROUBLESHOOTING: added hint about LD_LIBRARY_PATH and
          libgpod

2005-12-12 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c: fix problem with 'checked' checkbox. 

	* prefs_windows.c, context_menu.c, display.c: hide unfinished
          references to podcast download support.

	* updated German translation catalog

	* src/itdb.h: added itdb.h

	* bumped version to 0.99.0 for release

	* bumped version to 0.99.1 for CVS version

2005-12-11 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c, misc.c: add thumbnail images automatically.

2005-12-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* re-enable delete menus (in addition to context menu).

2005-12-09 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* change permissions to 0777 when creating directories (will
          be modified by user's umask).

	* display.c, gtkpod.glade: add 'Edit Details' menu entry.

2005-12-06 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c, display_itdb.h: notify details window when
          tracks are being removed.

2005-12-04 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c: apply/undo functionality

	* file_itunesdb.c: save thumbnail filename in .ext database

	* misc_track.c: new: track_set_text()

	* misc_conversion.c: recognize "--" as unset time

	* display_songs.c: use track_set_text(), track_copy_item()

	* details.c: writethrough for "remove cover art" added.

	* gtkpod.glade: change "charset" to "encoding"

	* details.c: copy artwork_count and _size when copying
          artwork, remember last directory.

	* file_itunesdb.c: fixed error when writing iTunesDB.ext
          (filename/thumbnail)

2005-11-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* mp4file.c: patch by Simon MARTIN fixing support for video
          mp4.

2005-11-28 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c: support for set_thumbnails / remove thumbnails.

2005-11-26 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* globally changed glade_xml_get_widget() to
          gtkpod_xml_get_widget()

2005-11-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_sorttabs.c, prefs.[ch], prefs_window.[ch],
          gtkpod.glade: compilation CD changes (patch by Iain
          Benson).

	* prefs_window.c: change glade_xml_get_widget() to
          gtkpod_xml_get_widget() (the latter gives a warning when
          accessing non-existing widgets).

	* display_playlists.c: compatibility fix for libpango < 1.8

2005-11-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* misc.h: corrected delcaration for (time_field_to_string).

	* display_playlists.c: include <pango/pango-font.h>.

2005-11-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c: added support for thumbnails display in "Show
          Details" window. Requires libgpod version 0.2.2

2005-11-23 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* details.c, details.h: detailled display of tracks. Alpha
          with known issues (no sync of data between main display and
          details display -> deleting of tracks with the details
          window open may segfault the appliction if the details
          window consequently attempts to access the track and
          similar).
	  TODO: create menu entries (currently only context menu).

2005-11-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added support for compilation flag in mp3 files. Thanks to
          Iain Benson for the patch.

	* added read support for TID, WFD, TDS, TDR, TT3 tags (used
          by podcasts)

2005-11-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_export.c: Files were not copied from iPod to harddisk
          during DND.

2005-11-20 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* gtkpod.glade: added tooltips that disappeared when
          remodelling the prefs window one or two versions
          earlier. Removed prefs_window_old from gtkpod.glade.

	* gtkpod.glade, details.c, details.h: started work on window
          to display details.

2005-11-19 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c, file.h, file_itunesdb.c: basic video support --
          thanks to Uwe Hermann for the input.

	* updated smart playlists automatically if 'live updating' is
          set.

2005-11-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* configure.in: make check for flex fatal.

2005-11-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c: strip whitespace when getting tags from filename
          via template.

	* take care of flag1/2/3/4 when adding and removing podcasts,
          normal tracks...

2005-11-12 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* podcasts: some code cleanup, added context menus

	* prefs.c: handle filenames somewhat more decently

	* file_itunesdb.c: bugfix: tracks marked for deletion were
          not deleted from the iPod.

	* gtkpod.glade: added scrollbars for smart playlist
          rules-view.

	* display_spl.c: remember last size of edit smartlist window.

	* display_itdb.c, context_menus.c, misc_confirm.c,
          misc_track.c: provisions for podcasts DND and podcasts
          deletion.

2005-11-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* moved mkdirhier() from file_export.c to misc.c

2005-11-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: API for itdb_shuffle_write() changed.

2005-10-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_spl.c: turn "-" button (delete rule) insensitive
          when only one rule is left to avoid that all rules are
          deleted which would result in a corrupted iTunesDB.

	* display_spl.c: make sure rule frame is turned insensitive
          when "ignore rules" is active when the spl window opens.

2005-10-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_itdb.c: added gp_itdb_get_podcasts()

	* file_itunesdb.c: set up 'Podcasts' local store on startup.

	* removed mountpoint as parameter in itdb_write() as it was
          not used.

2005-10-18 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added a number of 64bit patches received from Bodo Bauer --
          thanks!

2005-10-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* podcast.c: (on_pc_add_button_clicked) declared *text[2]
	  instead of *text[1] to fix a segfault.

2005-10-17 Alexander Dutton <alexdutton@f2s.com>

	* podcast.c: added function prototypes for abort_fetch(),
	  abort_fetch_response(), removed some warnings and fixed a
	  segfault when an URL contains no '/' in 
	  podcast_set_cur_file_name().

	* podcast.h: added extra items to enums (forgot to update file
	  earlier.

	* prefs_window.c: declared *text[1] static to fix a segfault.
	  Thanks to Bodo Bauer for these.

2005-10-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c: (get_file_name) fixed assertion when adding files.

2005-10-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file.c: fixed possible segfault in update_tracks() that can
          occur when updating tracks that become duplicates through
          updating. Thanks to Thorsten Brehm.

2005-10-02 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_songs.c: allow to select interactive typeahead
          search row by clicking on the row -- it is no longer
          necessary to click in the header and initiate sorting.
	  Please note that the Treeview needs to have keyboard
          focus.

2005-10-02 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: add podcasts list when creating empty
          databases. Add podcasts list when importing database
          without podcasts. Merge podcasts list when importing
          database with podcasts list present. NOTE: special
          behaviour of podcasts (i.e. not being listed in MPL and
          consequences thereof) is not yet addressed.

2005-09-30 Alexander Dutton <asdutton@users.sourceforge.net>

	* podcast.c: removed dependence on gdk_threads_init() as
	  fetching is now done without threads. Also set up to follow
	  Location: headers (as used by libsyn.com). Now ready for
	  integration with the rest of gtkpod.

2005-09-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* mp3file.c: fixed incorrect reading of lame replay gain

2005-09-29 Alexander Dutton <asdutton@users.sourceforge.net>

        * prefs.c: added validation code to prefs_set_pc_dir() to
          remove any trailing slashes from the podcast directory.

2005-09-27 Alexander Dutton <asdutton@users.sourceforge.net>

        * podcast.c: added podcast_window, which displays progress.
          Code behind it fetches podcasts from XML files which are
          behaving (ie conform to Apple XML schema at
          http://www.itunes.com/DTDs/Podcast-1.0.dtd). Others are
          being worked on. At present gdk_threads_init() at main.c:65
          needs commenting in for things to work, breaking other stuff.
          I'll look into this!

2005-09-26 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* configure.in: check for libcurl (Jerry Dueitt)

2005-09-26 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_songs.c: sorting by size and tracklength did not
          work because of two missing break statements... Thanks to
          Flavio Stanchina for tracking this down!

2005-09-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* phased out use of ITDB_PL_TYPE_MPL/NORM and replaced with
          itdb_playlist_is_mpl()

	* display_playlists.c: give Podcasts playlists a special
          look.

2005-09-23 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added 'date released' to displayable colums

	* applied Alexander Dutton's patch for podcast support (first
          stages thereof).

2005-09-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: ipod_dirs_present(): extend check to
          iPod_Control/Music/F00/ because on the iPod nano
          iPod_Control/Music/ exists, but the F.. directories don't.

2005-09-19 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* scripts/sync-palm-jppy.py: NEW: script to sync contacts
	  from a Palm (via jppy http://wiki.zanu.org.uk/jppy). Thanks
	  to Nick Piper, http://www.nickpiper.co.uk/)

	* type-ahead search functionality (thanks to Nick Piper)

2005-09-18 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added category, description, podcast url, podcast
          rss and subtitle fields to displayable fields.

        * BUGFIX: 'Check iPod's files' could crash under certain
          circumstances (thanks to David Mansfield for the patch).

	* gp_playlist_remove_track(): when removing a track from the
          database, only the first occurance of track in all other
          playlists was removed.

	* replaced usleep() with nanosleep() in info.c (usleep would
          not work for intervals larger than 1 second on some systems).

2005-09-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: fixed bug in gp_itdb_set_mountpoint
          causing gtkpod to crash when exiting the preferences
          dialog (bug introduced on 9/13)

	* added 'Comment' field to displayed fields.

	* libgpod API change: fdesc -> filetype

	* updated it.po (thanks to Edward Matteucci)

2005-09-16 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Check iPod's files (check_db()) now checks files in all
	  available F.. directories.

	* Give progress information when matching MD5 checksums to
          files in case iTunesDB was written by different software.

2005-09-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* new fr.po by Eric Lassauge
	* removed reference to itdb_ sourcefiles in POTFILES.in (have
	  been moved to the libgpod project
	* updated de.po

2005-09-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* implemented changed API for itdb_filename_on_ipod()

	* use new function itdb_set_mountpoint() to set mountpoint.

2005-09-11 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* bumped version to V0.96.CVS

	* gtkpod is now dependent on the new ligbpod

	* note about LD_LIBRARY_PATH when installing libmp4v2 to
          /usr/local/lib

	* file_itunesdb.c: fixed critical assertion when calling
          gp_itdb_add_extra_full () with itdb==NULL.

	* misc_confirm.c: (ipod_directories_ok): fixed small
          potential memory leak.

2005-08-29 Jorg Schuler <jcsjcs@users.sourceforge.net>

        * SAFETY: call sync() and flush all buffers to the iPod after
          writing the iTunesDB -- should minimise filesystem errors
          caused by people disconnecting the iPod without unmounting
          (four instances in itdb_itunesdb.c)

	* NEW: script to sync addressbooks in ldif format provided by
          Sebastien BERIDOT (scripts/sync-ldif.sh,
          scripts/ldif2vcf.sh).

        * NEW: script to sync kNotes (KDE note program) provided by
          Sebastian Scherer (scripts/sync-knotes.sh).

2005-08-27 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* MP3 tags: use 'Band/Orchestra/Accompaniment' (TPE2) as
	  artist if it exists. Otherwise use 'Lead artist/Lead
	  performer/Soloist/Performing group' (TPE1) as before. Let
	  me know if this causes problems for you.

	* BUGFIX: Copying playlists by drag and drop could confuse
          smart playlists referencing these playlists. This was due
          because the DND duplicated the ID by which these playlists
          were referenced. A new ID is now set automatically when
          adding playlists by itdb_playlist_add().

2005-08-07 Jorg Schuler <jcsjcs@users.sourceforge.net>

        * UPDATED Hebrew translation (thanks to Assaf Gillat)

	* include <sys/param.h> in misc.c to avoid error when
          including <sys/mount.h> under FreeBSD 5.4 (reported by
          Pablo Cacho)

2005-07-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* fixed some gcc 2.95 compatibility issues (thanks to Arno
	  Overgaauw)

2005-07-16 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Improved handling of dangling files (files that are
          referenced in the iTunesDB but are not present on the iPod)
          after I had to use the function myself: iTunes 4.9 removed
          most of my files from the iPod -- currently restoring with
          an old iTunesDB copy.

	* Changed writing of iTunesDB to make sure OTG Playlists are
          handled correctly.

	* Fixed compatibility issue with new firmware 3.1 and iTunes
          4.9 (only 256 tracks were shown on the iPod, iTunes
          removed the majority of the tracks from the iPod).
	  Podcasts are still not supported, however, and will be lost
	  when handled by gtkpod.

	* Updated German translation catalog

2005-07-15 Jorg Schuler <jcsjcs@users.sourceforge.net>

	 * Added Hebrew translation -- thanks to Assaf Gillat!

2005-07-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* itdb_itunesdb.c: fixed OTG playlist filename and handling
          (thanks to "Todd")

	* Makefile.am: use relative path for symbolic link to
          gtkpod.glade

2005-07-08 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* misc.c: use 'eject' executable instead of eject code. Also
          fixes the bug that 'could not unmount' was always
          displayed, even if the umount was successful (thanks to
          Andreas Hauber).

2005-07-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Makefile.am: ln complained when installing the second time
          into the same place -- remove target file before the ln
          command.

	* itdb_itunesdb.c: changed from version 0x0c (iTunes 4.71/4.8)
          to version 0x0d (iTunes 4.9). mhods are now considered
          children of mhips, and the total length of the mhip must be
          adjusted accordingly.

2005-07-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* finished user-definable sort ignore list (ctrl-s). Still
          todo: resort automatically when changing the ignore list.

2005-06-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

        * itdb_itunesdb.c: BUGFIX: Some iTunesDB written by iTunes
          could not be read because of an error in the parse code
          (gtkpod would attempt to read beyond the end of the file)

	* continued with user definable ignore list in
          display_sorttabs.c (the list still is not used, but now only
          the sort function needs to be updated)

2005-06-28 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* continued with user definable ignore list during sorting
          ("The", "A",... at the beginning of fields). Prefs can be
          set, are stored and read, but they are not yet used. Also,
          the initial values must still be set.

2005-06-27 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* started with user definable ignore list during sorting
          ("The", "A",... at the beginning of fields).

2005-06-25 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Changing the mountpoint was not represented correctly in the
          prefs.

	* Release as 0.93.1

	* bumped to version 0.94-CVS

	* update sort preferences window when clicking on track view
          headers

	* display_songs.c: implemented stable sorting

2005-06-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Renamed 'Copy from iPod' to 'Export from Database',
          disabling Export from the iPod in offline mode, and fixing
          export from local database.

2005-06-23 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* sync-thunderbird.sh: use of 'iconv' instead of 'recode'

	* bumped version to 0.93 and released

2005-06-22 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* updated sv.po (thanks to Stefan Asserh√§ll)

2005-06-20 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied gcc4.0 patch provided by Mark Mitchell

	* included updated Japanese catalog (thanks to Kentaro
          Fukuchi)

	* added sync-thunderbird.sh and mab2vcard scripts provided by
	  Clinton Gormley.

	* repaired progress dialog display when exporting tracks from
          the iPod.

	* added more detailled error messages when files could not be
          added / refreshed.

	* updated de.po

	* added faac entry to TROUBLESHOOTING

2005-06-18 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* finished code automatically export tracks from iPod to
          harddisk when dragging from the iPod database to the local
          database.

2005-06-15 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* integrated debian patches provided by Frank Lichtenheld

	* replace EjectSCSI code by a version written by Frank
          Lichtenheld that uses the new SG ioctls.

	* changed copyright notice to 2002-2005 in most files

2005-06-15 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* added sync-abook.sh and sync-webcalendar.sh scripts provided
          by Daniel Kercher

	* added sync-thunderbird.sh provided by Clinton Gormley

2005-06-12 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* applied patch provided by Mattias Wadman: don't hang when
          reading playlist files with empty lines (provided by
          'Matthias')

	* added checks when adding playlist files to avoid adding
          directories or the same playlist file again.

	* applied patch provided by Alexey Dokuchaev to replace
          'recode' by 'iconv' in the export scripts provided.

	* fixed bug when exporting tracks from the iPod: when the
          original filename of tracks is stored, tracks were not
          copied from the iPod but from the original location on the
          user's harddisk. If that file has been removed in the
          meanwhile, the export would fail.

	* added new Italian catalog (thanks to Edward Matteucci)

	* updated po/POTFILES.in and updated all po-files

	* updated German translation catalog (and some English typos)

2005-06-05 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* fixed bug when setting up initial local and iPod databases
          (added the iPod database twice, did not create local
          database)

	* changed version to 0.91-CVS and made sure the itdb_* prefs
          settings are skipped for version < 0.91.

	* moved remaining functions in callback.c to better locations
          (mainly display.c), removed callbacks.c and callbacks.h

2005-06-03 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* included James Ligget's patch to replace the file selectors
          with filechooser dialogs

	* moved the code in dirbrowser.c to the new file fileselection.c

2005-06-02 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* Fixed bug for display and reading of compilation flag
          (display reversed, wrong offset during read)

	* Fixed bug for reading of type entry (wrong offset)

	(thanks	to Julien Oster for the patch)

2005-05-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* itdb_cp_track_to_ipod(): no longer uses ipod-ID to create
          filename.

	* file.c, misc_confirm.c: fixed several non-reported bugs
          concerning deletion

	* display_playlists.c, display_sortabs.c, display_songs.c:
          added gtkpod_tracks_statusbar_update() to drag_end()
          callbacks.

	* file_itunesdb.c: fixed segfault when pressing the 'Cancel'
          button during file transfer to the iPod.

2005-05-27 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* moved all prefs_windows callbacks from callbacks.c to
          prefs_windows.c  -- should be continued with other
          callbacks.

	* display_songs.c: ipod_path in track display set to "Local
          Database" for ITDB_TYPE_LOCAL

	* prefs_windows.c: fixed error concerning show/hide of
	  tooltips

	* display*.c: hopefully made tooltips working again throughout
          gtkpod.

2005-05-26 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* renamed get_track_name* to get_file_name*

	* fixed some issues with track deletion (tracks were never
          removed from harddisk)

	* moved some more prefs_windows callbacks from callbacks.c to
          prefs_windows.c (continuous project whenever I feel like it)

	* gtkpod.glade: added a couple of forgotten callbacks to prefs
          dialog

2005-05-24 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* finished rewrite of delete code (only context-menu delete
          supported at the moment). Basically untested :-(

2005-05-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display warning if unmounting of the iPod was unsuccessful

	* when syncing dirs remove tracks when dir was removed.

2005-05-21 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* itdb_itunesdb.c: add check for truncated PlayCounts file and
          skip it (necessary in case the file has been truncated by
          dosfsck)

	* display_spl.c: fixed double display of combobox entries

	* mp3file.c: hunted down the meanest segfault encountered so
          far. "mp3info *mp3info;" sizeof (mp3info) is what?

	  Replaced "mp3info" by "MP3Info" and "mp3header" by
	  "MP3Header" to avoid similar problems in the future.

2005-05-19 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* fixed segfault when trying to import read-protected MP3 files
          (thanks to Chris Pitchford for pointing out this bug).

	* fixed segfault when adding tracks to the local database

	* improved error messages when import of files fails

	* added some g_return_if_fail(itdb->mountpoint) statements.

2005-05-17 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* implemented tree-lookup for track IDs to speed up import of
	  large iTunesDBs along the lines of Richard Deken's patch

2005-05-16 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: fixed infinite loop pointed out by Richard
          Deken

2005-05-13 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* mp3file.c: applied Christoph Kunz' patch addressing a couple
          of compatibility issues with non-ID3v2.4 compatible software
          (most software out there that's not using the id3tag-lib).

	* gtkpod.glade: added delete event signal handler to
          prefs_window

	* info.c, prefs_window.c: raise prefs/info window to the top
          when it is already open

	* info.c: added xml_signal_autoconnect() otherwise close
          buttons wouldn't work.

2005-05-12 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* mp4file.c: changed case-sensitive compare to
          case-insensitive compare for filetype extension

2005-05-10 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* file_itunesdb.c: Automatic update of smart playlists after
          import.

	* file_export.c: Fixed segfault in 'copy from iPod' and 'crate
          playlist file' (caused by transition to libglade)

	* file_export.c: Print warning when overwriting existing files.

2005-05-09 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* tracks deleted from the iPod within gtkpod will now really
          be deleted during the next Sync (bug introduced through the
          introduction of itdb)

2005-05-07 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* TROUBLESHOOTING: added note from Mark Davis that the SHUFFLE
          cares about it's volume name.

	* itdb_itunesdb.c: make sure version number written to
          iTunesDB is 0x0c -- otherwise the SHUFFLE is not supported.

	* itdb_playlist.c: correct comparison for smart-list action
          SPLACTION_IS_IN_THE_RANGE

	* file.c: when adding tracks also copy tracks that are already
          on the iPod but not in the iPod_Control dir.

2005-05-07 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/ preliminary import/export support for local database as
          well as for iPod database.

	* file_itunesdb.c, itdb_itunesdb.c: added support for iPod
          Shuffle. Testing is needes because I don't own a Shuffle.

	* replayed all g_assert() with g_return_if_fail() to avoid
          program termination on error.

2005-05-07 David Sede√±o <david@alderia.com>

	* gtkpod.glade: Put autoselect_hbox name to an hbox in display tab.

2005-05-06 David Sede√±o <david@alderia.com>

	* gtkpod.glade: Put Cancel, Apply, Accept buttons in preferences
	window. Added Misc and Toolbar section to Display tab.

2005-05-06 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/display* and others: DND between filter tabs, playlist
	  view, track view, as well as external file browsers.

	* display_songs.c, display_playlists.c, display.c,
          display_sorttabs.c: added text/uri-list as drag and drop
          type, added autoscroll to playlist- and track view,
          corrected behaviour during certain drop situations onto the
          track view.

2005-05-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* display_spl.c: fix spl edit window after transition to
	  libglade.

2005-05-01 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* src/*.c: initialize @xml_file to either the local copy or
	  the installed copy (main.c) and use that for all accesses to
	  gtkpod.glade

	* Makefile.am: uninstall-hook, rework install-hook and
          dist-hook, move pixmaps back to pixmaps directory

	* display_playlist.c, display_songs.c: implemented DND within
          track view as well as between track and playlist view.

	* parse_tracks_from_string(): fixed segfault

2005-04-30 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* po/sv.po: update received from Stefan Asserh√§ll

	* file_itunesdb.c: fixed segfault when importing database
          twice (still need to fix that database _can_ be imported
          twice, which shouldn't be)

	* file_itunesdb.c: display track info after import of database

	* misc_track.c: fixed error in gp_duplicate_remove() when
          @track was not yet added to any itdb.

	* display_playlists.c: DND within playlist view across and
          within itdbs now functional (it appears).

2005-04-29 David Sede√±o Fernandez <david@alderia.com>

	* gtkpod.glade: Put scrolled window in General tab.

2005-04-29 Jorg Schuler <jcsjcs@users.sourceforge.net>

	* gtkpod.glade: Set 'Visible' to 'No' on all top level windows
        to that the resize command still works as it is.

	* src/ removed dependence on support.[ch], interface.[ch] and
	the files.

	* po/de.po: update

	* src/display_playlist.c, src/misc_track.[ch]: continued work
          on playlist DND.

2005-04-28  David Sede√±o Fernandez <david@alderia.com>

	* gtkpod.glade: Sync option from Reading to General. Put forbidden
	buttons in mserv option. Add missing tooltips. Add missing callbacks
	in Edit and Tools tab.
	
2005-04-20  David Sede√±o Fernandez <david@alderia.com>

	* gtkpod.glade: Preferences window work to follow more the Gnome HIG.

2005-04-18  David Sede√±o Fernandez <david@alderia.com>

	* src/prefs_window.c (prefs_window_show_hide_tooltips): Check if we
	have the correct data.
	* NEWS: Copy the ChangeLog file to NEWS file.
	* ChangeLog: Update.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/prefs_window.c: Get the right tooltips object.
	* src/display.h: Add GtkTooltipsData to SortData;
	* src/display_sorttabs.c: Show / Hide tooltips.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/Makefile.am: Remove support.c and support.h 
	* src/main.c: remove add_pixmap_directory calls.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/confirmation.c: Save the glade xml file in ConfData struct in
	order to take widgets later with glade_xml_get_widget. 
	* src/misc.c : Change GtkWidget for GladeXML
	in order to take the widgets with glade_xml_get_widget in some
	functions.
	* src/misc.h: Change GtkWidget for GladeXML in some functions.
	* src/file_export.c: Call option_set_* and
	option_get_* , with the xml file instead of the window.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/Makefile.am: Remove interface.* for compilation.
	* src/display_spl.c: Load spl_window from glade file. Change all
	lookup_widget calls to glade_xml_get_widget for spl_window.
	* src/interface.h: Remove create_spl_window.
	* src/interface.c: Remove create_spl_window.
	* src/prefs_window.c: Fix a not remove line.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/file_export.c: Load export_files_options and
	export_playlist_file_options from glade file.
	* src/interfac.c: Remove create_files_options and
	create_export_playlist_file_options.
	* src/interfac.h: Remove create_files_options and
	create_export_playlist_file_options.
	
2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/confirmation.c: Load confirm_dialog from glade file. Change all
	lookup_widget calls to glade_xml_get_widget for confirm_dialog.
	* src/interfac.c: Remove create_confirm_dialog.
	* src/interfac.h: Remove create_confirm_dialog.
	
2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/info.c: Load info window from glade file. Change all
	lookup_widget calls to glade_xml_get_widget for info_window.
	* src/interfac.c: Remove create_info_window.
	* src/interfac.h: Remove create_info_window.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/prefs_window.c: Load sort_window from glade file. Change
        all lookup_widget calls to glade_xml_get_widget for sort_window.
	* src/interfac.c: Remove create_sort_window.
	* src/interfac.h: Remove create_sort_window.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/display_sorttabs.c: Load calendar_window from glade file. Change
	all lookup_widget calls to glade_xml_get_widget for cal.
	* src/interfac.c: Remove create_calendar_window.
	* src/interfac.h: Remove create_calendar_window.
	
2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/display_sorttabs.c: Load special_sorttab from glade file. Change
	all lookup_widget calls to glade_xml_get_widget for special. 
	* src/interfac.c: Remove create_special_sorttab.
	* src/interfac.h: Remove create_special_sorttab.
	
2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* src/misc.h: include glade.h
	* src/misc.c: Load about window from glade file.
	* src/interface.c: Remove create_gtkpod_about_window.
	* src/interface.h: Remove create_gtkpod_about_window.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* gtkpod.glade: Rename on_most_rated_tracks_playlist's1_activate to
	on_most_rated_tracks_playlist_s1_activate so libglade can handle it.
	* src/interface.c: Remove create_prefs_window function.
	* src/interface.h: Remove create_prefs_window and create_gtkpod.
	* src/prefs_window.c: prefs_window_xml new var. Load prefs_window from
	xml. Change all lookup_widget calls to glade_xml_get_widget for
	prefs_window.

2005-04-09  David Sede√±o Fernandez <david@alderia.com>

	* configure.in: Check libglade and gmodule
	* Makefile.am: Install pixmaps without pixmaps prefix. Install glade
	file.
	* src/display.h: Include glade.h. Add main xml variable for glade
	file.
	* src/display.c: Change lookup_widget calls to glade_xml_get_widget.
	* src/display_playlists.c: Change lookup_widget calls to
	glade_xml_get_widget for main window.
	* src/display_songs.c: Change lookup_widget calls to
	glade_xml_get_widget for main window.
	* src/display_sorttabs.c: Change lookup_widget calls
	to glade_xml_get_widget for main window.
	* src/info.c: Change lookup_widget calls to glade_xml_get_widget for
	main window.
	* src/interface.c: Delete create_gtkpod.
	* src/main.c: Load main xml glade file.
	* src/misc_input.c: Change lookup_widget calls to glade_xml_get_widget
	for main window.
	* src/prefs.c:  Change lookup_widget calls to glade_xml_get_widget 
	for main window.
